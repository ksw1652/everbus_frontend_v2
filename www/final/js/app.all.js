function convertImgToBase64URL(e,o,t){var s=new Image;s.crossOrigin="Anonymous",s.onload=function(){var e,s=document.createElement("CANVAS"),n=s.getContext("2d");s.height=this.height,s.width=this.width,n.drawImage(this,0,0),e=s.toDataURL(t),o(e),s=null},s.src=e}angular.module("everbus.directives").directive("busRouteTypeDirective",function(){return{restrict:"AE",scope:{route_type:"@routeType"},link:function(e,o,t,s){if(void 0!==e.route_type&&""!=e.route_type){e.route_type=parseInt(e.route_type),o.addClass("bus_type_"+e.route_type);var n=["공항","마을","간선","지선","순환","광역","급행","경기","인천","일반","직행","좌석","시외","심야","첨단"];o.append("&nbsp<span> ("+n[e.route_type]+") </span>")}}}}),angular.module("everbus.directives").directive("drawTimeline",function(){return{restrict:"E",scope:{vehicleFlag:"@",metroLine:"@",metroareaName:"@",trainType:"@",busrouteType:"@"},template:'<div class="circle" style="background-color:{{color}}"><i class="{{icon}}"></i></div><div class="line_down" style="border: 1px solid {{color}}"></div><div class="circle_departure" style="background-color: {{color}}"></div>',link:function(e,o,t){e.color=void 0,e.icon=void 0,"M"==e.vehicleFlag?(e.icon="ion-android-subway","수도권"==e.metroareaName?"1"==e.metroLine?e.color="#00498B":"2"==e.metroLine?e.color="#009246":"3"==e.metroLine?e.color="#F36630":"4"==e.metroLine?e.color="#00A2D1":"5"==e.metroLine?e.color="#A064A3":"6"==e.metroLine?e.color="#9E4510":"7"==e.metroLine?e.color="#5D6519":"8"==e.metroLine?e.color="#D6406A":"9"==e.metroLine?e.color="#8E764B":"A"==e.metroLine?e.color="#006D9D":"B"==e.metroLine?e.color="#E0A134":"G"==e.metroLine?e.color="#2ABFD0":"I"==e.metroLine?e.color="#6E98BB":"K"==e.metroLine?e.color="#72C7A6":"S"==e.metroLine?e.color="#BB1833":"SU"==e.metroLine&&(e.color="#E0A134"):"부산"==e.metroareaName?"1"==e.metroLine?e.color="#F06A00":"2"==e.metroLine?e.color="#81BF48":"3"==e.metroLine?e.color="#BB8C00":"4"==e.metroLine?e.color="#217DCB":"K"==e.metroLine&&(e.color="#8652A1"):"대구"==e.metroareaName?"1"==e.metroareaName?e.color="#D93F5C":"2"==e.metroareaName?e.color="#00AA80":"3"==e.metroareaName&&(e.color="#FFB100"):"대전"==e.metroareaName?e.color="#007448":"광주"==e.metroareaName&&(e.color="#009088")):"B"==e.vehicleFlag?(e.icon="ion-android-bus","1"==e.busrouteType?e.color="#BF3BE8":"2"==e.busrouteType?e.color="#5FD06E":"3"==e.busrouteType?e.color="#1F5BFF":"4"==e.busrouteType?e.color="#08DB32":"5"==e.busrouteType?e.color="#E8A612":"6"==e.busrouteType?e.color="#FF302F":"7"==e.busrouteType?e.color="#FF302F":"8"==e.busrouteType?e.color="#2CB5A3":"9"==e.busrouteType?e.color="#4DACEB":"10"==e.busrouteType?e.color="#77AB2C":"11"==e.busrouteType?e.color="#FF302F":"12"==e.busrouteType?e.color="#FF302F":"13"==e.busrouteType?e.color="#1F5BFF":"14"==e.busrouteType?e.color="#A09D9D":"15"==e.busrouteType&&(e.color="#BF3BE8")):"T"==e.vehicleFlag?(e.icon="ion-android-train","KTX"==e.trainType?e.color="cornflowerblue":"ITX-청춘"==e.trainType?e.color="#13B4DE":"새마을"==e.trainType?e.color="#4E9E5C":"무궁화"==e.trainType?e.color="tomato":"누리로"==e.trainType&&(e.color="#0F1011")):"E"==e.vehicleFlag&&(e.color="lightslategrey",e.icon="ion-android-bus")}}}),angular.module("everbus.directives").directive("vehiclelabelDirective",function(){return{restrict:"E",scope:{vehicleFlag:"@",metroLine:"@",metroareaName:"@",trainType:"@",busrouteType:"@",busrouteName:"@"},template:'<div class="vehicleLabel" style="background-color:{{color}}">{{vehicleTypename}}</div><div class="busnameLabel" style="color:{{color}}">{{busrouteName}}</div>',link:function(e,o,t){e.color=void 0,e.vehicleTypename=void 0,"M"==e.vehicleFlag?"수도권"==e.metroareaName?"1"==e.metroLine?(e.color="#00498B",e.vehicleTypename="수도권 1호선"):"2"==e.metroLine?(e.color="#009246",e.vehicleTypename="수도권 2호선"):"3"==e.metroLine?(e.color="#F36630",e.vehicleTypename="수도권 3호선"):"4"==e.metroLine?(e.color="#00A2D1",e.vehicleTypename="수도권 4호선"):"5"==e.metroLine?(e.color="#A064A3",e.vehicleTypename="수도권 5호선"):"6"==e.metroLine?(e.color="#9E4510",e.vehicleTypename="수도권 6호선"):"7"==e.metroLine?(e.color="#5D6519",e.vehicleTypename="수도권 7호선"):"8"==e.metroLine?(e.color="#D6406A",e.vehicleTypename="수도권 8호선"):"9"==e.metroLine?(e.color="#8E764B",e.vehicleTypename="수도권 9호선"):"A"==e.metroLine?(e.color="#006D9D",e.vehicleTypename="공항철도"):"B"==e.metroLine?(e.color="#E0A134",e.vehicleTypename="분당선"):"G"==e.metroLine?(e.color="#2ABFD0",e.vehicleTypename="경춘선"):"I"==e.metroLine?(e.color="#6E98BB",e.vehicleTypename="인천 1호선"):"K"==e.metroLine?(e.color="#72C7A6",e.vehicleTypename="경의선"):"S"==e.metroLine?(e.color="#BB1833",e.vehicleTypename="신분당선"):"SU"==e.metroLine&&(e.color="#E0A134",e.vehicleTypename="수인선"):"부산"==e.metroareaName?"1"==e.metroLine?(e.color="#F06A00",e.vehicleTypename="부산 1호선"):"2"==e.metroLine?(e.color="#81BF48",e.vehicleTypename="부산 2호선"):"3"==e.metroLine?(e.color="#BB8C00",e.vehicleTypename="부산 3호선"):"4"==e.metroLine?(e.color="#217DCB",e.vehicleTypename="부산 4호선"):"K"==e.metroLine&&(e.color="#8652A1",e.vehicleTypename="부산 경전철"):"대구"==e.metroareaName?"1"==e.metroareaName?(e.color="#D93F5C",e.vehicleTypename="대구 1호선"):"2"==e.metroareaName?(e.color="#00AA80",e.vehicleTypename="대구 2호선"):"3"==e.metroareaName&&(e.color="#FFB100",e.vehicleTypename="대구 3호선"):"대전"==e.metroareaName?(e.color="#007448",e.vehicleTypename="대전 1호선"):"광주"==e.metroareaName&&(e.color="#009088",e.vehicleTypename="광주 1호선"):"B"==e.vehicleFlag?"1"==e.busrouteType?(e.color="#BF3BE8",e.vehicleTypename="공항버스"):"2"==e.busrouteType?(e.color="#5FD06E",e.vehicleTypename="마을버스"):"3"==e.busrouteType?(e.color="#1F5BFF",e.vehicleTypename="간선버스"):"4"==e.busrouteType?(e.color="#08DB32",e.vehicleTypename="지선버스"):"5"==e.busrouteType?(e.color="#E8A612",e.vehicleTypename="순환버스"):"6"==e.busrouteType?(e.color="#FF302F",e.vehicleTypename="광역버스"):"7"==e.busrouteType?(e.color="#FF302F",e.vehicleTypename="급행버스"):"8"==e.busrouteType?(e.color="#2CB5A3",e.vehicleTypename="경기버스"):"9"==e.busrouteType?(e.color="#4DACEB",e.vehicleTypename="인천버스"):"10"==e.busrouteType?(e.color="#77AB2C",e.vehicleTypename="일반버스"):"11"==e.busrouteType?(e.color="#FF302F",e.vehicleTypename="직행버스"):"12"==e.busrouteType?(e.color="#FF302F",e.vehicleTypename="좌석버스"):"13"==e.busrouteType?(e.color="#1F5BFF",e.vehicleTypename="시외버스"):"14"==e.busrouteType?(e.color="#A09D9D",e.vehicleTypename="심야버스"):"15"==e.busrouteType&&(e.color="#BF3BE8",e.vehicleTypename="첨단버스"):"T"==e.vehicleFlag?"KTX"==e.trainType?(e.color="cornflowerblue",e.vehicleTypename="KTX"):"ITX-청춘"==e.trainType?(e.color="#13B4DE",e.vehicleTypename="ITX-청춘"):"새마을"==e.trainType?(e.color="#4E9E5C",e.vehicleTypename="새마을"):"무궁화"==e.trainType?(e.color="tomato",e.vehicleTypename="무궁화"):"누리로"==e.trainType&&(e.color="#0F1011",e.vehicleTypename="누리로"):"E"==e.vehicleFlag&&(e.color="lightslategrey",e.vehicleTypename="고속버스")}}}),angular.module("everbus.directives").directive("vehicletypeDirective",function(){return{restrict:"E",scope:{vehicleType:"=vehicleType",vehicleTrain:"=vehicleTrain"},template:'<div class="vehicle_nametag" style="background-color: {{vehicle_color}};">{{vehicleName}}</div>',link:function(e,o,t,s){e.vehicle_color=void 0,e.vehicleName=void 0,"M"==e.vehicleType?(e.vehicle_color="#74674E",e.vehicleName="지하철"):"B"==e.vehicleType?(e.vehicle_color="#77AB2C",e.vehicleName="버스"):"T"==e.vehicleType?("KTX"==e.vehicleTrain?e.vehicle_color="cornflowerblue":"ITX-청춘"==e.vehicleTrain?e.vehicle_color="#13B4DE":"새마을"==e.vehicleTrain?e.vehicle_color="#4E9E5C":"무궁화"==e.vehicleTrain?e.vehicle_color="tomato":e.vehicle_color="#0F1011",e.vehicleName=e.vehicleTrain):"E"==e.vehicleType&&(e.vehicle_color="lightslategrey",e.vehicleName="고속버스")}}}),angular.module("everbus.services").factory("busRouteService",["$http","$q","$window",function(e,o,t){var s="http://54.255.169.44:3000",n={};return{http_get_route_nm_list:function(n){var d=o.defer(),_={ROUTENM:n,areaobject:t.localStorage.selected_area_code_arr};return e({url:s+"/bus/route/routeS",method:"POST",data:_}).success(function(e){var o=[];e=e[0];for(var t in e)e[t].ROUTEINFO=JSON.parse(e[t].ROUTEINFO),o.push({divider:e[t].AREANM,isDivider:!0}),o=o.concat(e[t].ROUTEINFO);d.resolve(o)}).error(function(e){d.reject(e)}),d.promise},http_get_route_detail:function(t,n){var d=o.defer(),_={ROUTEID:n,AREACD:t+""};return e({url:s+"/bus/route/routeD",method:"POST",data:_}).success(function(e){var o={};e.routestop[0][0].STOPLIST=JSON.parse(e.routestop[0][0].STOPLIST),o=e.routestop[0][0];for(var t in e.location_bus){var s=parseInt(e.location_bus[t]);s<o.STOPLIST.length&&(o.STOPLIST[s].real_bus=!0)}null==o.TRNSEQ?(o.TRNSEQ=o.STOPLIST.length,o.up_down_con=!1):o.up_down_con=!0,d.resolve(o)}).error(function(e){d.reject(e)}),d.promise},set_selected_route:function(e){n=e},get_selected_route:function(){return n}}}]),angular.module("everbus.services").factory("busStopService",["$http","$q","$window",function(e,o,t){var s="http://54.255.169.44:3000",n=void 0;return{http_get_stop_nm_list:function(n){var d=o.defer(),_={STOPNM:n,areaobject:t.localStorage.selected_area_code_arr};return e({url:s+"/bus/stop/stopS",method:"POST",data:_}).success(function(e){var o=[];e=e[0];for(var t in e)e[t].STOPINFO=JSON.parse(e[t].STOPINFO),o.push({divider:e[t].AREANM,isDivider:!0}),o=o.concat(e[t].STOPINFO);d.resolve(o)}).error(function(e){d.reject(e)}),d.promise},http_get_stop_detail:function(t,n){var d=o.defer(),_={AREACD:t+"",STOPID:n.stopid||n.STOPID,ARSID:n.arsid||n.ARSID,LAT:n.lat||n.LAT,LNG:n.lng||n.LNG};return e({url:s+"/bus/stop/stopD",method:"POST",data:_}).success(function(e){var o={};e.stopdetailinfo[0][0].ROUTELIST=JSON.parse(e.stopdetailinfo[0][0].ROUTELIST),o.arround_info=e.stoparoundxy[0],o.stop_detail_info=e.stopdetailinfo[0][0],o.real_bus=e.arrive_bus;for(var t in o.stop_detail_info.ROUTELIST)for(var s in o.real_bus)if(o.stop_detail_info.ROUTELIST[t].routeid==o.real_bus[s].routeid){var n=o.real_bus[s].arrive_time.indexOf("[");-1==n?"곧도착"==o.real_bus[s].arrive_time.replace(" ","")?o.stop_detail_info.ROUTELIST[t].real_time_info={arrive_time:o.real_bus[s].arrive_time,pre_count:"0 번째 전 정류장"}:o.stop_detail_info.ROUTELIST[t].real_time_info={arrive_time:o.real_bus[s].arrive_time,pre_count:o.real_bus[s].prev_stop_count+"번째 전 정류장"}:o.stop_detail_info.ROUTELIST[t].real_time_info={arrive_time:o.real_bus[s].arrive_time.substr(0,n),pre_count:o.real_bus[s].arrive_time.substr(n+1).replace("]","")+" 정류장"};break}d.resolve(o)}).error(function(e){d.reject(e)}),d.promise},set_selected_stop_info:function(e){n=e},get_selected_stop_info:function(){return n},get_selected_stop_list_proto:function(){var t=o.defer();return e.get("/data/stop_list.json").success(function(e){t.resolve(e)}).error(function(e){t.reject()}),t.promise}}}]),angular.module("everbus.services").factory("getappinfoService",["$window","$q","$http",function(e,o,t){var s={};return s.getapp_version=function(){var s=o.defer();return t({method:"GET",url:"http://54.255.169.44:3000/appversion"}).success(function(e,o,t,n){s.resolve(e)}).error(function(o,t,s,n){e.alert(o)}),s.promise},s.getapp_notice=function(){var s=o.defer();return t({method:"GET",url:"http://54.255.169.44:3000/notice"}).success(function(e,o,t,n){s.resolve(e)}).error(function(o,t,s,n){e.alert(o)}),s.promise},s}]),angular.module("everbus.services").factory("placedetailFactory",[function(){var e=void 0;return{setPlace_obj:function(o){e=o},getPlace_obj:function(){return e}}}]),angular.module("everbus.services").factory("placeinfoService",[function(){var e={};return e.check_value=!1,e.location={},{set_place_data:function(o){e=o,console.log(e)},get_place_data:function(){return e}}}]),angular.module("everbus.services").factory("placelatlngFactory",[function(){var e=void 0,o=void 0;return{set_start_latlng:function(o){e=o},get_start_latlng:function(){return e},set_end_latlng:function(e){o=e},get_end_latlng:function(){return o}}}]),angular.module("everbus.services").factory("placesearchFactory",["$window","$q","$http",function(e,o,t){var s={};return s.place_search=function(s,n){console.log("start_lat : "+s.lat()),console.log("start_lng : "+s.lng()),console.log("end_lat : "+n.lat()),console.log("end_lng : "+n.lng());var d=o.defer();return t({method:"GET",url:"http://54.255.169.44:3000/bus/place/placeS?st_lat="+s.lat()+"&st_lng="+s.lng()+"&ed_lat="+n.lat()+"&ed_lng="+n.lng()}).success(function(e,o,t,s){d.resolve(e)}).error(function(o,t,s,n){e.alert(o)}),d.promise},s}]),angular.module("everbus.services").factory("placesearchinfoFactory",[function(){var e=void 0,o=void 0;return{set_start_name:function(o){e=o},get_start_name:function(){return e},set_end_name:function(e){o=e},get_end_name:function(){return o}}}]),angular.module("everbus.services").factory("remodelingPathlistService",[function(){return{remodel_pathList:function(e){var o=[],t=void 0,s=void 0,n=void 0,d=void 0,_=[],r=[],c=[],i=[],l={},u={},a={},h={};if(console.log(e),0!=e[0].length){t=e[0];for(var b=0;b<t.length;b++)0!=t[b].second_st.length&&0!=t[b].second_ed.length?0==t[b].second_st[0].second_bus.length&&0!=t[b].second_st[0].second_metro.length&&0!=t[b].second_ed[0].second_bus.length&&0!=t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=void 0,l.second_metro_st=t[b].second_st[0].second_metro[0],l.third_bus_st=t[b].second_st[0].third_bus[0],l.second_bus_ed=t[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=t[b].first,u.second_bus_st=void 0,u.second_metro_st=t[b].second_st[0].second_metro[0],u.third_bus_st=t[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=t[b].second_ed[0].second_metro[0],u.third_bus_ed=t[b].second_ed[0].third_bus[0]):0!=t[b].second_st[0].second_bus.length&&0==t[b].second_st[0].second_metro.length&&0!=t[b].second_ed[0].second_bus.length&&0!=t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=t[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=t[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=t[b].first,u.second_bus_st=t[b].second_st[0].second_bus[0],u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_metro_ed=t[b].second_ed[0].second_metro[0],u.third_bus_ed=t[b].second_ed[0].third_bus[0]):0!=t[b].second_st[0].second_bus.length&&0!=t[b].second_st[0].second_metro.length&&0==t[b].second_ed[0].second_bus.length&&0!=t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=t[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_metro_ed=t[b].second_ed[0].second_metro[0],l.third_bus_ed=t[b].second_ed[0].third_bus[0],u.first=t[b].first,u.second_bus_st=void 0,u.second_metro_st=t[b].second_st[0].second_metro[0],u.third_bus_st=t[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=t[b].second_ed[0].second_metro[0],u.third_bus_ed=t[b].second_ed[0].third_bus[0]):0!=t[b].second_st[0].second_bus.length&&0!=t[b].second_st[0].second_metro.length&&0!=t[b].second_ed[0].second_bus.length&&0==t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=t[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=t[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=t[b].first,u.second_bus_st=void 0,u.second_metro_st=t[b].second_st[0].second_metro[0],u.third_bus_st=t[b].second_st[0].third_bus[0],u.second_bus_ed=t[b].second_ed[0].second_bus[0],u.second_metro_ed=void 0,u.third_bus_ed=void 0):0==t[b].second_st[0].second_bus.length&&0!=t[b].second_st[0].second_metro.length&&0==t[b].second_ed[0].second_bus.length&&0!=t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=void 0,l.second_metro_st=t[b].second_st[0].second_metro[0],l.third_bus_st=t[b].second_st[0].third_bus[0],l.second_bus_ed=void 0,l.second_metro_ed=t[b].second_ed[0].second_metro[0],l.third_bus_ed=t[b].second_ed[0].third_bus[0]):0==t[b].second_st[0].second_bus.length&&0!=t[b].second_st[0].second_metro.length&&0!=t[b].second_ed[0].second_bus.length&&0==t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=void 0,l.second_metro_st=t[b].second_st[0].second_metro[0],l.third_bus_st=t[b].second_st[0].third_bus[0],l.second_bus_ed=t[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=t[b].second_st[0].second_bus.length&&0==t[b].second_st[0].second_metro.length&&0==t[b].second_ed[0].second_bus.length&&0!=t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=t[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=t[b].second_ed[0].second_metro[0],l.third_bus_ed=t[b].second_ed[0].third_bus[0]):0!=t[b].second_st[0].second_bus.length&&0==t[b].second_st[0].second_metro.length&&0!=t[b].second_ed[0].second_bus.length&&0==t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=t[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=t[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=t[b].second_st[0].second_bus.length&&0!=t[b].second_st[0].second_metro.length&&0!=t[b].second_ed[0].second_bus.length&&0!=t[b].second_ed[0].second_metro.length&&(l.first=t[b].first,l.second_bus_st=t[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=t[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=t[b].first,u.second_bus_st=t[b].second_st[0].second_bus[0],u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_bus_ed=void 0,u.second_metro_ed=t[b].second_ed[0].second_metro[0],u.third_bus_ed=t[b].second_ed[0].third_bus[0],a.first=t[b].first,a.second_bus_st=void 0,a.second_metro_st=t[b].second_st[0].second_metro[0],a.third_bus_st=t[b].second_st[0].third_bus[0],a.second_bus_ed=t[b].second_ed[0].second_bus[0],a.second_metro_ed=void 0,a.third_bus_ed=void 0,h.first=t[b].first,h.second_bus_st=void 0,h.second_metro_st=t[b].second_st[0].second_metro[0],h.third_bus_st=t[b].second_st[0].third_bus[0],h.second_bus_ed=void 0,h.second_metro_ed=t[b].second_ed[0].second_metro[0],h.third_bus_ed=t[b].second_ed[0].third_bus[0]):0!=t[b].second_st.length&&0==t[b].second_ed.length?0==t[b].second_st[0].second_bus.length&&0!=t[b].second_st[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=void 0,l.second_metro_st=t[b].second_st[0].second_metro[0],l.third_bus_st=t[b].second_st[0].third_bus[0],l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=t[b].second_st[0].second_bus.length&&0==t[b].second_st[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=t[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0):(l.first=t[b].first,l.second_bus_st=t[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=t[b].first,u.second_bus_st=void 0,u.second_metro_st=t[b].second_st[0].second_metro[0],u.third_bus_st=t[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=void 0,u.third_bus_ed=void 0):0==t[b].second_st.length&&0!=t[b].second_ed.length?0==t[b].second_ed[0].second_bus.length&&0!=t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=t[b].second_ed[0].second_metro[0],l.third_bus_ed=t[b].second_ed[0].third_bus[0]):0!=t[b].second_ed[0].second_bus.length&&0==t[b].second_ed[0].second_metro.length?(l.first=t[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=t[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):(l.first=t[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=t[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=t[b].first,u.second_bus_st=void 0,u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_bus_ed=void 0,u.second_metro_ed=t[b].second_ed[0].second_metro[0],u.third_bus_ed=t[b].second_ed[0].third_bus[0]):(l.first=t[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0),_.push(l),"{}"!=JSON.stringify(u)&&_.push(u),"{}"!=JSON.stringify(a)&&_.push(a),"{}"!=JSON.stringify(h)&&_.push(h),l={},u={},a={},h={}}if(o.push(_),0!=e[1].length){s=e[1];for(var b=0;b<s.length;b++)0!=s[b].second_st.length&&0!=s[b].second_ed.length?0==s[b].second_st[0].second_bus.length&&0!=s[b].second_st[0].second_metro.length&&0!=s[b].second_ed[0].second_bus.length&&0!=s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=void 0,l.second_metro_st=s[b].second_st[0].second_metro[0],l.third_bus_st=s[b].second_st[0].third_bus[0],l.second_bus_ed=s[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=s[b].first,u.second_bus_st=void 0,u.second_metro_st=s[b].second_st[0].second_metro[0],u.third_bus_st=s[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=s[b].second_ed[0].second_metro[0],u.third_bus_ed=s[b].second_ed[0].third_bus[0]):0!=s[b].second_st[0].second_bus.length&&0==s[b].second_st[0].second_metro.length&&0!=s[b].second_ed[0].second_bus.length&&0!=s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=s[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=s[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=s[b].first,u.second_bus_st=s[b].second_st[0].second_bus[0],u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_metro_ed=s[b].second_ed[0].second_metro[0],u.third_bus_ed=s[b].second_ed[0].third_bus[0]):0!=s[b].second_st[0].second_bus.length&&0!=s[b].second_st[0].second_metro.length&&0==s[b].second_ed[0].second_bus.length&&0!=s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=s[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_metro_ed=s[b].second_ed[0].second_metro[0],l.third_bus_ed=s[b].second_ed[0].third_bus[0],u.first=s[b].first,u.second_bus_st=void 0,u.second_metro_st=s[b].second_st[0].second_metro[0],u.third_bus_st=s[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=s[b].second_ed[0].second_metro[0],u.third_bus_ed=s[b].second_ed[0].third_bus[0]):0!=s[b].second_st[0].second_bus.length&&0!=s[b].second_st[0].second_metro.length&&0!=s[b].second_ed[0].second_bus.length&&0==s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=s[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=s[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=s[b].first,u.second_bus_st=void 0,u.second_metro_st=s[b].second_st[0].second_metro[0],u.third_bus_st=s[b].second_st[0].third_bus[0],u.second_bus_ed=s[b].second_ed[0].second_bus[0],u.second_metro_ed=void 0,u.third_bus_ed=void 0):0==s[b].second_st[0].second_bus.length&&0!=s[b].second_st[0].second_metro.length&&0==s[b].second_ed[0].second_bus.length&&0!=s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=void 0,l.second_metro_st=s[b].second_st[0].second_metro[0],l.third_bus_st=s[b].second_st[0].third_bus[0],l.second_bus_ed=void 0,l.second_metro_ed=s[b].second_ed[0].second_metro[0],l.third_bus_ed=s[b].second_ed[0].third_bus[0]):0==s[b].second_st[0].second_bus.length&&0!=s[b].second_st[0].second_metro.length&&0!=s[b].second_ed[0].second_bus.length&&0==s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=void 0,l.second_metro_st=s[b].second_st[0].second_metro[0],l.third_bus_st=s[b].second_st[0].third_bus[0],l.second_bus_ed=s[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=s[b].second_st[0].second_bus.length&&0==s[b].second_st[0].second_metro.length&&0==s[b].second_ed[0].second_bus.length&&0!=s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=s[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=s[b].second_ed[0].second_metro[0],l.third_bus_ed=s[b].second_ed[0].third_bus[0]):0!=s[b].second_st[0].second_bus.length&&0==s[b].second_st[0].second_metro.length&&0!=s[b].second_ed[0].second_bus.length&&0==s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=s[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=s[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=s[b].second_st[0].second_bus.length&&0!=s[b].second_st[0].second_metro.length&&0!=s[b].second_ed[0].second_bus.length&&0!=s[b].second_ed[0].second_metro.length&&(l.first=s[b].first,l.second_bus_st=s[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=s[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=s[b].first,u.second_bus_st=s[b].second_st[0].second_bus[0],u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_bus_ed=void 0,u.second_metro_ed=s[b].second_ed[0].second_metro[0],u.third_bus_ed=s[b].second_ed[0].third_bus[0],a.first=s[b].first,a.second_bus_st=void 0,a.second_metro_st=s[b].second_st[0].second_metro[0],a.third_bus_st=s[b].second_st[0].third_bus[0],a.second_bus_ed=s[b].second_ed[0].second_bus[0],a.second_metro_ed=void 0,a.third_bus_ed=void 0,h.first=s[b].first,h.second_bus_st=void 0,h.second_metro_st=s[b].second_st[0].second_metro[0],h.third_bus_st=s[b].second_st[0].third_bus[0],h.second_bus_ed=void 0,h.second_metro_ed=s[b].second_ed[0].second_metro[0],h.third_bus_ed=s[b].second_ed[0].third_bus[0]):0!=s[b].second_st.length&&0==s[b].second_ed.length?0==s[b].second_st[0].second_bus.length&&0!=s[b].second_st[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=void 0,l.second_metro_st=s[b].second_st[0].second_metro[0],l.third_bus_st=s[b].second_st[0].third_bus[0],l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=s[b].second_st[0].second_bus.length&&0==s[b].second_st[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=s[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0):(l.first=s[b].first,l.second_bus_st=s[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=s[b].first,u.second_bus_st=void 0,u.second_metro_st=s[b].second_st[0].second_metro[0],u.third_bus_st=s[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=void 0,u.third_bus_ed=void 0):0==s[b].second_st.length&&0!=s[b].second_ed.length?0==s[b].second_ed[0].second_bus.length&&0!=s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=s[b].second_ed[0].second_metro[0],l.third_bus_ed=s[b].second_ed[0].third_bus[0]):0!=s[b].second_ed[0].second_bus.length&&0==s[b].second_ed[0].second_metro.length?(l.first=s[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=s[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):(l.first=s[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=s[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=s[b].first,u.second_bus_st=void 0,u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_bus_ed=void 0,u.second_metro_ed=s[b].second_ed[0].second_metro[0],u.third_bus_ed=s[b].second_ed[0].third_bus[0]):(l.first=s[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0),r.push(l),"{}"!=JSON.stringify(u)&&r.push(u),"{}"!=JSON.stringify(a)&&r.push(a),"{}"!=JSON.stringify(h)&&r.push(h),l={},u={},a={},h={}}if(o.push(r),0!=e[2].length){n=e[2];for(var b=0;b<n.length;b++)0!=n[b].second_st.length&&0!=n[b].second_ed.length?0==n[b].second_st[0].second_bus.length&&0!=n[b].second_st[0].second_metro.length&&0!=n[b].second_ed[0].second_bus.length&&0!=n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=void 0,l.second_metro_st=n[b].second_st[0].second_metro[0],l.third_bus_st=n[b].second_st[0].third_bus[0],l.second_bus_ed=n[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=n[b].first,u.second_bus_st=void 0,u.second_metro_st=n[b].second_st[0].second_metro[0],u.third_bus_st=n[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=n[b].second_ed[0].second_metro[0],u.third_bus_ed=n[b].second_ed[0].third_bus[0]):0!=n[b].second_st[0].second_bus.length&&0==n[b].second_st[0].second_metro.length&&0!=n[b].second_ed[0].second_bus.length&&0!=n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=n[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=n[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=n[b].first,u.second_bus_st=n[b].second_st[0].second_bus[0],u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_metro_ed=n[b].second_ed[0].second_metro[0],u.third_bus_ed=n[b].second_ed[0].third_bus[0]):0!=n[b].second_st[0].second_bus.length&&0!=n[b].second_st[0].second_metro.length&&0==n[b].second_ed[0].second_bus.length&&0!=n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=n[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_metro_ed=n[b].second_ed[0].second_metro[0],l.third_bus_ed=n[b].second_ed[0].third_bus[0],u.first=n[b].first,u.second_bus_st=void 0,u.second_metro_st=n[b].second_st[0].second_metro[0],u.third_bus_st=n[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=n[b].second_ed[0].second_metro[0],u.third_bus_ed=n[b].second_ed[0].third_bus[0]):0!=n[b].second_st[0].second_bus.length&&0!=n[b].second_st[0].second_metro.length&&0!=n[b].second_ed[0].second_bus.length&&0==n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=n[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=n[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=n[b].first,u.second_bus_st=void 0,u.second_metro_st=n[b].second_st[0].second_metro[0],u.third_bus_st=n[b].second_st[0].third_bus[0],u.second_bus_ed=n[b].second_ed[0].second_bus[0],u.second_metro_ed=void 0,u.third_bus_ed=void 0):0==n[b].second_st[0].second_bus.length&&0!=n[b].second_st[0].second_metro.length&&0==n[b].second_ed[0].second_bus.length&&0!=n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=void 0,l.second_metro_st=n[b].second_st[0].second_metro[0],l.third_bus_st=n[b].second_st[0].third_bus[0],l.second_bus_ed=void 0,l.second_metro_ed=n[b].second_ed[0].second_metro[0],l.third_bus_ed=n[b].second_ed[0].third_bus[0]):0==n[b].second_st[0].second_bus.length&&0!=n[b].second_st[0].second_metro.length&&0!=n[b].second_ed[0].second_bus.length&&0==n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=void 0,l.second_metro_st=n[b].second_st[0].second_metro[0],l.third_bus_st=n[b].second_st[0].third_bus[0],l.second_bus_ed=n[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=n[b].second_st[0].second_bus.length&&0==n[b].second_st[0].second_metro.length&&0==n[b].second_ed[0].second_bus.length&&0!=n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=n[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=n[b].second_ed[0].second_metro[0],l.third_bus_ed=n[b].second_ed[0].third_bus[0]):0!=n[b].second_st[0].second_bus.length&&0==n[b].second_st[0].second_metro.length&&0!=n[b].second_ed[0].second_bus.length&&0==n[b].second_ed[0].second_metro.length?(l.first=n[b].first,
l.second_bus_st=n[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=n[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=n[b].second_st[0].second_bus.length&&0!=n[b].second_st[0].second_metro.length&&0!=n[b].second_ed[0].second_bus.length&&0!=n[b].second_ed[0].second_metro.length&&(l.first=n[b].first,l.second_bus_st=n[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=n[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=n[b].first,u.second_bus_st=n[b].second_st[0].second_bus[0],u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_bus_ed=void 0,u.second_metro_ed=n[b].second_ed[0].second_metro[0],u.third_bus_ed=n[b].second_ed[0].third_bus[0],a.first=n[b].first,a.second_bus_st=void 0,a.second_metro_st=n[b].second_st[0].second_metro[0],a.third_bus_st=n[b].second_st[0].third_bus[0],a.second_bus_ed=n[b].second_ed[0].second_bus[0],a.second_metro_ed=void 0,a.third_bus_ed=void 0,h.first=n[b].first,h.second_bus_st=void 0,h.second_metro_st=n[b].second_st[0].second_metro[0],h.third_bus_st=n[b].second_st[0].third_bus[0],h.second_bus_ed=void 0,h.second_metro_ed=n[b].second_ed[0].second_metro[0],h.third_bus_ed=n[b].second_ed[0].third_bus[0]):0!=n[b].second_st.length&&0==n[b].second_ed.length?0==n[b].second_st[0].second_bus.length&&0!=n[b].second_st[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=void 0,l.second_metro_st=n[b].second_st[0].second_metro[0],l.third_bus_st=n[b].second_st[0].third_bus[0],l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=n[b].second_st[0].second_bus.length&&0==n[b].second_st[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=n[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0):(l.first=n[b].first,l.second_bus_st=n[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=n[b].first,u.second_bus_st=void 0,u.second_metro_st=n[b].second_st[0].second_metro[0],u.third_bus_st=n[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=void 0,u.third_bus_ed=void 0):0==n[b].second_st.length&&0!=n[b].second_ed.length?0==n[b].second_ed[0].second_bus.length&&0!=n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=n[b].second_ed[0].second_metro[0],l.third_bus_ed=n[b].second_ed[0].third_bus[0]):0!=n[b].second_ed[0].second_bus.length&&0==n[b].second_ed[0].second_metro.length?(l.first=n[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=n[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):(l.first=n[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=n[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=n[b].first,u.second_bus_st=void 0,u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_bus_ed=void 0,u.second_metro_ed=n[b].second_ed[0].second_metro[0],u.third_bus_ed=n[b].second_ed[0].third_bus[0]):(l.first=n[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0),c.push(l),"{}"!=JSON.stringify(u)&&c.push(u),"{}"!=JSON.stringify(a)&&c.push(a),"{}"!=JSON.stringify(h)&&c.push(h),l={},u={},a={},h={}}if(o.push(c),0!=e[3].length){d=e[3];for(var b=0;b<d.length;b++)0!=d[b].second_st.length&&0!=d[b].second_ed.length?0==d[b].second_st[0].second_bus.length&&0!=d[b].second_st[0].second_metro.length&&0!=d[b].second_ed[0].second_bus.length&&0!=d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=void 0,l.second_metro_st=d[b].second_st[0].second_metro[0],l.third_bus_st=d[b].second_st[0].third_bus[0],l.second_bus_ed=d[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=d[b].first,u.second_bus_st=void 0,u.second_metro_st=d[b].second_st[0].second_metro[0],u.third_bus_st=d[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=d[b].second_ed[0].second_metro[0],u.third_bus_ed=d[b].second_ed[0].third_bus[0]):0!=d[b].second_st[0].second_bus.length&&0==d[b].second_st[0].second_metro.length&&0!=d[b].second_ed[0].second_bus.length&&0!=d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=d[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=d[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=d[b].first,u.second_bus_st=d[b].second_st[0].second_bus[0],u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_metro_ed=d[b].second_ed[0].second_metro[0],u.third_bus_ed=d[b].second_ed[0].third_bus[0]):0!=d[b].second_st[0].second_bus.length&&0!=d[b].second_st[0].second_metro.length&&0==d[b].second_ed[0].second_bus.length&&0!=d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=d[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_metro_ed=d[b].second_ed[0].second_metro[0],l.third_bus_ed=d[b].second_ed[0].third_bus[0],u.first=d[b].first,u.second_bus_st=void 0,u.second_metro_st=d[b].second_st[0].second_metro[0],u.third_bus_st=d[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=d[b].second_ed[0].second_metro[0],u.third_bus_ed=d[b].second_ed[0].third_bus[0]):0!=d[b].second_st[0].second_bus.length&&0!=d[b].second_st[0].second_metro.length&&0!=d[b].second_ed[0].second_bus.length&&0==d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=d[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=d[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=d[b].first,u.second_bus_st=void 0,u.second_metro_st=d[b].second_st[0].second_metro[0],u.third_bus_st=d[b].second_st[0].third_bus[0],u.second_bus_ed=d[b].second_ed[0].second_bus[0],u.second_metro_ed=void 0,u.third_bus_ed=void 0):0==d[b].second_st[0].second_bus.length&&0!=d[b].second_st[0].second_metro.length&&0==d[b].second_ed[0].second_bus.length&&0!=d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=void 0,l.second_metro_st=d[b].second_st[0].second_metro[0],l.third_bus_st=d[b].second_st[0].third_bus[0],l.second_bus_ed=void 0,l.second_metro_ed=d[b].second_ed[0].second_metro[0],l.third_bus_ed=d[b].second_ed[0].third_bus[0]):0==d[b].second_st[0].second_bus.length&&0!=d[b].second_st[0].second_metro.length&&0!=d[b].second_ed[0].second_bus.length&&0==d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=void 0,l.second_metro_st=d[b].second_st[0].second_metro[0],l.third_bus_st=d[b].second_st[0].third_bus[0],l.second_bus_ed=d[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=d[b].second_st[0].second_bus.length&&0==d[b].second_st[0].second_metro.length&&0==d[b].second_ed[0].second_bus.length&&0!=d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=d[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=d[b].second_ed[0].second_metro[0],l.third_bus_ed=d[b].second_ed[0].third_bus[0]):0!=d[b].second_st[0].second_bus.length&&0==d[b].second_st[0].second_metro.length&&0!=d[b].second_ed[0].second_bus.length&&0==d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=d[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=d[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=d[b].second_st[0].second_bus.length&&0!=d[b].second_st[0].second_metro.length&&0!=d[b].second_ed[0].second_bus.length&&0!=d[b].second_ed[0].second_metro.length&&(l.first=d[b].first,l.second_bus_st=d[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=d[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=d[b].first,u.second_bus_st=d[b].second_st[0].second_bus[0],u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_bus_ed=void 0,u.second_metro_ed=d[b].second_ed[0].second_metro[0],u.third_bus_ed=d[b].second_ed[0].third_bus[0],a.first=d[b].first,a.second_bus_st=void 0,a.second_metro_st=d[b].second_st[0].second_metro[0],a.third_bus_st=d[b].second_st[0].third_bus[0],a.second_bus_ed=d[b].second_ed[0].second_bus[0],a.second_metro_ed=void 0,a.third_bus_ed=void 0,h.first=d[b].first,h.second_bus_st=void 0,h.second_metro_st=d[b].second_st[0].second_metro[0],h.third_bus_st=d[b].second_st[0].third_bus[0],h.second_bus_ed=void 0,h.second_metro_ed=d[b].second_ed[0].second_metro[0],h.third_bus_ed=d[b].second_ed[0].third_bus[0]):0!=d[b].second_st.length&&0==d[b].second_ed.length?0==d[b].second_st[0].second_bus.length&&0!=d[b].second_st[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=void 0,l.second_metro_st=d[b].second_st[0].second_metro[0],l.third_bus_st=d[b].second_st[0].third_bus[0],l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0):0!=d[b].second_st[0].second_bus.length&&0==d[b].second_st[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=d[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0):(l.first=d[b].first,l.second_bus_st=d[b].second_st[0].second_bus[0],l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=d[b].first,u.second_bus_st=void 0,u.second_metro_st=d[b].second_st[0].second_metro[0],u.third_bus_st=d[b].second_st[0].third_bus[0],u.second_bus_ed=void 0,u.second_metro_ed=void 0,u.third_bus_ed=void 0):0==d[b].second_st.length&&0!=d[b].second_ed.length?0==d[b].second_ed[0].second_bus.length&&0!=d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=d[b].second_ed[0].second_metro[0],l.third_bus_ed=d[b].second_ed[0].third_bus[0]):0!=d[b].second_ed[0].second_bus.length&&0==d[b].second_ed[0].second_metro.length?(l.first=d[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=d[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0):(l.first=d[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=d[b].second_ed[0].second_bus[0],l.second_metro_ed=void 0,l.third_bus_ed=void 0,u.first=d[b].first,u.second_bus_st=void 0,u.second_metro_st=void 0,u.third_bus_st=void 0,u.second_bus_ed=void 0,u.second_metro_ed=d[b].second_ed[0].second_metro[0],u.third_bus_ed=d[b].second_ed[0].third_bus[0]):(l.first=d[b].first,l.second_bus_st=void 0,l.second_metro_st=void 0,l.third_bus_st=void 0,l.second_bus_ed=void 0,l.second_metro_ed=void 0,l.third_bus_ed=void 0),i.push(l),"{}"!=JSON.stringify(u)&&i.push(u),"{}"!=JSON.stringify(a)&&i.push(a),"{}"!=JSON.stringify(h)&&i.push(h),l={},u={},a={},h={}}return o.push(i),console.log(o),o}}}]),angular.module("everbus.services").factory("selectedAreaService",["$http","$window","$q",function(e,o,t){var s=[],n=!1;return{init_selected_area_list:function(){n=!0;var s=t.defer();return void 0==o.localStorage.selected_area_list?e.get("data/region_modi.json").success(function(e){console.log(e),o.localStorage.selected_area_list=angular.toJson(e),s.resolve()}).error(function(e){s.reject(e)}):s.resolve(),s.promise},check_selected_area_list:function(){return n},set_selected_area_list:function(e){o.localStorage.selected_area_list=angular.toJson(e)},get_selected_area_list:function(){return JSON.parse(o.localStorage.selected_area_list)},set_areacd_arr:function(){s=[];var e=JSON.parse(o.localStorage.selected_area_list);for(var t in e)for(var n in e[t].data)e[t].data[n].checked&&s.push(e[t].data[n].regioncode);console.log(s),o.localStorage.selected_area_code_arr=s},get_areacd_arr:function(){return 0==s.length&&(s=JSON.parse(o.localStorage.selected_area_list)),s}}}]),angular.module("everbus.services").factory("shareService",["$q","$http",function(e,o){var t={};return t.gmap={},t.uploadStory=function(t){console.log(t);var s=e.defer();return o({url:"http://54.255.169.44:3000/share/upload/uploadcard",method:"POST",data:t}).success(function(e,o,t,n){s.resolve(e)}).error(function(e,o,t,s){console.log(s)}),s.promise},t.storyCard=function(t){var s=e.defer();return o({url:"http://54.255.169.44:3000/share/story",method:"POST",data:t}).success(function(e,o,t,n){s.resolve(e)}).error(function(e,o,t,s){console.log(s)}),s.promise},t.nearCard=function(t){var s=e.defer();return o({url:"http://54.255.169.44:3000/share/near",method:"POST",data:t}).success(function(e,o,t,n){s.resolve(e)}).error(function(e,o,t,s){console.log(s)}),s.promise},t.setMapObject=function(e){console.log(e),t.gmap=e},t.getMapObject=function(){return console.log(t.gmap),t.gmap},t}]),angular.module("everbus.controllers").controller("bookmarkCtrl",["$scope","$state","$timeout","$ionicLoading","$localStorage","placelatlngFactory","placesearchinfoFactory","busRouteService","busStopService",function(e,o,t,s,n,d,_,r,c){e.$storage=n,void 0!=e.$storage.recently_search_List&&0!=e.$storage.recently_search_List.length||(e.$storage.recently_search_List=[]),e.$on("$ionicView.enter",function(){e.shouldShowDelete=!1,e.recent_list=e.$storage.recently_search_List,console.log(e.recent_list)}),e.recentitem_clicked=function(e){s.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),"route"==e.search_type?(r.http_get_route_detail(e.area,e.rid).then(function(e){r.set_selected_route(e),t(function(){o.go("tabs.routedetail"),s.hide()},500)},function(e){t(function(){s.hide()},500),alert("network 불안정")}),s.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'})):"station"==e.search_type?(c.http_get_stop_detail(e.areacd,e).then(function(e){c.set_selected_stop_info(e),t(function(){o.go("tabs.stationdetail"),s.hide()},500)},function(){t(function(){s.hide()},500),alert("network 불안정")}),s.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'})):"place"==e.search_type&&("number"==typeof e.start_latlng.lat?d.set_start_latlng(new google.maps.LatLng(e.start_latlng.lat,e.start_latlng.lng)):d.set_start_latlng(e.start_latlng),_.set_start_name(e.start_name),"number"==typeof e.end_latlng.lat?d.set_end_latlng(new google.maps.LatLng(e.end_latlng.lat,e.end_latlng.lng)):d.set_end_latlng(e.end_latlng),_.set_end_name(e.end_name),o.go("tabs.placesearchresult"))}}]),angular.module("everbus.controllers").controller("indexCtrl",["$scope","$ionicSideMenuDelegate","$cordovaEmailComposer",function(e,o,t){e.showRightMenu=function(){o.toggleRight()},e.sendbugmail=function(){var e={to:"makeyourif@gmail.com",subject:"오류 및 문의메일 입니다.",body:"여러분의 메일 한 통이 저희 아이에프에게는 소중한 자산이 됩니다.<br> 감사합니다.<br><br>",isHtml:!0};t.open(e).then(null,function(){})}}]),angular.module("everbus.controllers").controller("placedetailCtrl",["$scope","$state","placedetail_obj","placesearchinfoFactory",function(e,o,t,s){e.start_name=s.get_start_name(),e.second_bus_st=t.second_bus_st,e.third_bus_st=t.third_bus_st,e.second_metro_st=t.second_metro_st,e.first=t.first,e.third_bus_ed=t.third_bus_ed,e.second_metro_ed=t.second_metro_ed,e.second_bus_ed=t.second_bus_ed,e.end_name=s.get_end_name(),void 0!=t.first.TR_INFO&&(e.first_TR=JSON.parse(t.first.TR_INFO).metro),void 0!=t.second_metro_st&&void 0!=t.second_metro_st.TR_INFO&&(e.second_metro_st_TR=JSON.parse(t.second_metro_st.TR_INFO).metro,console.log(e.second_metro_st_TR)),void 0!=t.second_metro_ed&&void 0!=t.second_metro_ed.TR_INFO&&(e.second_metro_ed_TR=JSON.parse(t.second_metro_ed.TR_INFO).metro,console.log(e.second_metro_ed_TR)),void 0!=e.second_bus_st&&(e.second_bus_st_TR=JSON.parse(t.second_bus_st.TR_INFO)),void 0!=e.third_bus_st&&(e.third_bus_st_TR=JSON.parse(t.third_bus_st.TR_INFO)),void 0!=e.third_bus_ed&&(e.third_bus_ed_TR=JSON.parse(t.third_bus_ed.TR_INFO)),void 0!=e.second_bus_ed&&(e.second_bus_ed_TR=JSON.parse(t.second_bus_ed.TR_INFO)),e.goto_placedetailfullmap=function(e){o.go("tabs.placedetailfullmap",{param:e})}}]),angular.module("everbus.controllers").controller("placedetailfullmapCtrl",["$scope","placesearchinfoFactory","placedetail_obj","$ionicSlideBoxDelegate","$stateParams","placelatlngFactory",function(e,o,t,s,n,d){e.start_name=o.get_start_name(),e.second_bus_st=t.second_bus_st,e.third_bus_st=t.third_bus_st,e.second_metro_st=t.second_metro_st,e.first=t.first,e.third_bus_ed=t.third_bus_ed,e.second_metro_ed=t.second_metro_ed,e.second_bus_ed=t.second_bus_ed,e.end_name=o.get_end_name(),e.departure_obj={step_name:"departure",st_obj:{latitude:d.get_start_latlng().lat(),longitude:d.get_start_latlng().lng()}},e.arrival_obj={step_name:"arrival",st_obj:{latitude:d.get_end_latlng().lat(),longitude:d.get_end_latlng().lng()}};var r=[];e.calculate_slideindex=function(e,o,t,s,n){var d={};d.step_name=e,d.st_obj={latitude:o,longitude:t},d.ed_obj={latitude:s,longitude:n},r.push(d)};var c=[];e.$on("$ionicView.enter",function(){c=_.uniqWith(r,_.isEqual),c.unshift(e.departure_obj),c.push(e.arrival_obj),console.log("placedetail_obj : "),console.log(t),console.log("latlng_list : "),console.log(c),e.active_slide_num=_.findIndex(c,function(e){return e.step_name==n.param}),e.map_check=!0,e.map={center:{latitude:c[e.active_slide_num].st_obj.latitude,longitude:c[e.active_slide_num].st_obj.longitude},zoom:17,options:{mapTypeControl:!1},start_markers:[],end_markers:[]},e.polyline={id:1,path:[{latitude:c[e.active_slide_num].st_obj.latitude,longitude:c[e.active_slide_num].st_obj.latitude},{latitude:c[e.active_slide_num].st_obj.latitude,longitude:c[e.active_slide_num].st_obj.latitude}],stroke:{color:"#6060FB",weight:3},editable:!1,draggable:!1,geodesic:!0,visible:!0},e.map.start_markers=[{id:1,icon:"img/marker_departure.png",latitude:c[e.active_slide_num].st_obj.latitude,longitude:c[e.active_slide_num].st_obj.longitude}]}),e.$on("$ionicView.leave",function(){e.map_check=!1}),e.slideChanged=function(o){"departure"==c[o].step_name?(e.map.center={latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude},e.map.start_markers=[{id:1,icon:"img/marker_departure.png",latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude}],e.polyline={id:1,path:[{latitude:null,longitude:null},{latitude:null,longitude:null}],stroke:{color:"#6060FB",weight:3},editable:!1,draggable:!1,geodesic:!0,visible:!0},e.map.end_markers=[]):"arrival"==c[o].step_name?(e.map.center={latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude},e.map.start_markers=[{id:1,icon:"img/marker_arrival.png",latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude}],e.polyline={id:1,path:[{latitude:null,longitude:null},{latitude:null,longitude:null}],stroke:{color:"#6060FB",weight:3},editable:!1,draggable:!1,geodesic:!0,visible:!0},e.map.end_markers=[]):"walk_1"==c[o].step_name?(e.map.center={latitude:(c[o].st_obj.latitude+c[o].ed_obj.latitude)/2,longitude:(c[o].st_obj.longitude+c[o].ed_obj.longitude)/2},e.polyline={id:1,path:[{latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude},{latitude:c[o].ed_obj.latitude,longitude:c[o].ed_obj.longitude}],stroke:{color:"#6060FB",weight:3},editable:!1,draggable:!1,geodesic:!0,visible:!0},e.map.start_markers=[{id:1,icon:"img/marker_departure.png",latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude}],e.map.end_markers=[{id:2,icon:"img/marker_walk.png",latitude:c[o].ed_obj.latitude,longitude:c[o].ed_obj.longitude}]):"walk_2"==c[o].step_name||"walk_3"==c[o].step_name||"walk_4"==c[o].step_name||"walk_5"==c[o].step_name||"walk_6"==c[o].step_name?(e.map.center={latitude:(c[o].st_obj.latitude+c[o].ed_obj.latitude)/2,longitude:(c[o].st_obj.longitude+c[o].ed_obj.longitude)/2},e.polyline={id:1,path:[{latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude},{latitude:c[o].ed_obj.latitude,longitude:c[o].ed_obj.longitude}],stroke:{color:"#6060FB",weight:3},editable:!1,draggable:!1,geodesic:!0,visible:!0},e.map.start_markers=[{id:1,icon:"img/marker_takeoff.png",latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude}],e.map.end_markers=[{id:2,icon:"img/marker_walk.png",latitude:c[o].ed_obj.latitude,longitude:c[o].ed_obj.longitude}]):(e.map.center={latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude},e.polyline={id:1,path:[{latitude:null,longitude:null},{latitude:null,longitude:null}],stroke:{color:"#6060FB",weight:3},editable:!1,draggable:!1,geodesic:!0,visible:!0},e.map.start_markers=[{id:1,icon:"img/marker_takeon.png",latitude:c[o].st_obj.latitude,longitude:c[o].st_obj.longitude}],e.map.end_markers=[])},e.slideLeft=function(){s.previous()},e.slideRight=function(){s.next()}}]),angular.module("everbus.controllers").controller("routedetailCtrl",["$scope","$ionicFilterBar","$ionicScrollDelegate","$ionicHistory","$ionicLoading","$timeout","$state","busRouteService","busStopService",function(e,o,t,s,n,d,_,r,c){e.route_info={},e.stop_up_list=[],e.stop_down_list=[],e.stop_list=[],e.up_down_con=!0,e.init=function(){console.log("detail_init_call"),e.route_info=r.get_selected_route(),e.control_stop_list("up"),console.log(e.route_info)},e.$on("$ionicView.enter",function(){e.init()}),e.control_stop_list=function(o){e.stop_list=[],"up"==o?(angular.element(document.getElementById("up")).removeClass("button-light"),angular.element(document.getElementById("up")).removeClass("button-outline"),angular.element(document.getElementById("up")).addClass("button-calm"),angular.element(document.getElementById("down")).removeClass("button-calm"),angular.element(document.getElementById("down")).addClass("button-light"),angular.element(document.getElementById("down")).addClass("button-outline"),e.stop_list=e.route_info.STOPLIST.slice(0,e.route_info.TRNSEQ),e.up_down_con=!0):(angular.element(document.getElementById("down")).removeClass("button-light"),angular.element(document.getElementById("down")).removeClass("button-outline"),angular.element(document.getElementById("down")).addClass("button-calm"),angular.element(document.getElementById("up")).removeClass("button-calm"),angular.element(document.getElementById("up")).addClass("button-light"),angular.element(document.getElementById("up")).addClass("button-outline"),e.stop_list=e.route_info.STOPLIST.slice(e.route_info.TRNSEQ,e.route_info.length),e.up_down_con=!1)},e.showFilterBar=function(){console.log(e.route_info),o.show({items:e.stop_list,update:function(o){console.log(o),e.stop_list=o},filterProperties:"stopnm"})},e.goback=function(){s.goBack()},e.refesh=function(){console.log(e.route_info.AREACD,e.route_info.ROUTEID),r.http_get_route_detail(e.route_info.AREACD,e.route_info.ROUTEID).then(function(o){r.set_selected_route(o),e.init(),d(function(){n.hide()},500)},function(e){d(function(){n.hide()},500),alert("network 불안정")}),n.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'})},e.click_stop=function(o){c.http_get_stop_detail(e.route_info.AREACD,o).then(function(e){c.set_selected_stop_info(e),d(function(){_.go("tabs.stationdetail"),n.hide()},500)}),n.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'})}}]),angular.module("everbus.controllers").controller("routesearchCtrl",["$scope","$state","$ionicLoading","$timeout","busRouteService","$localStorage",function(e,o,t,s,n,d){e.route_list=[],e.$storage=d,e.gotoroutedetail=function(d){n.http_get_route_detail(d.area,d.rid).then(function(_){console.log(_),n.set_selected_route(_),s(function(){var s;for(s=0;s<e.$storage.recently_search_List.length&&("route"!=e.$storage.recently_search_List[s].search_type||d.rid!=e.$storage.recently_search_List[s].rid);s++);s==e.$storage.recently_search_List.length?(d.search_type="route",e.$storage.recently_search_List.push(d)):(e.$storage.recently_search_List.splice(s,1),d.search_type="route",e.$storage.recently_search_List.push(d)),o.go("tabs.routedetail"),t.hide()},500)},function(e){s(function(){t.hide()},500),alert("network 불안정")}),t.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'})};e.route_search_key_up=function(o){void 0!==o&&o.length>=1&&n.http_get_route_nm_list(o).then(function(o){e.route_list=o,e.infinite_init()},function(e){s(function(){t.hide()},500),alert("network 불안정")})},e.infinite_init=function(){e.limit_cnt=10,e.infinite_con=!0,e.$broadcast("scroll.infiniteScrollComplete")},e.limit_cnt=10,e.infinite_con=!1,e.loadMoreData=function(){e.limit_cnt<e.route_list.length?(e.limit_cnt+=10,e.infinite_con=!0):e.infinite_con=!1,e.$broadcast("scroll.infiniteScrollComplete")}}]),angular.module("everbus.controllers").controller("shareplaceCtrl",["$scope","$window","$ionicPopover","$cordovaGeolocation","$ionicPopup","$ionicModal","$ionicLoading","$timeout","$state","$cordovaImagePicker","$ionicScrollDelegate","placeinfoService","$ionicSideMenuDelegate","shareService",function(e,o,t,s,n,d,_,r,c,i,l,u,a,h){function b(){var o={};o.check_value=!1,o.location={},u.set_place_data(o),e.story_pictures=[],e.check_pictureValue=!1,e.sendShareStory.title="",e.sendShareStory.text="",c.go(c.current,{},{reload:!0})}e.active="card",e.sendShareStory={title:"",text:"",photos:void 0,lat:"",lng:"",address:""},e.storyCard=[],e.story_card_obj={pagenum:1,title:""},h.storyCard(e.story_card_obj).then(function(o){e.storyCard.push(o)}),e.searchTitle=function(){e.storyCard=[],console.log(e.story_card_obj.title.length),0==e.story_card_obj.title.length?h.storyCard(e.story_card_obj).then(function(o){e.storyCard.push(o)}):e.story_card_obj.title.length>1&&h.storyCard(e.story_card_obj).then(function(o){console.log(o),e.storyCard.push(o)})},e.gps_next_value=!1,e.check_getloaction=!1,e.check_pictureValue=!1,e.currentBtn_clicked=function(){var o={timeout:2e3,enableHighAccuracy:!0};s.getCurrentPosition(o).then(function(o){e.gps_next_value=!1,e.set_current_position()},function(o){e.set_current_position()})},e.showConfirm=function(){var o=n.confirm({title:"위치 정보 승인",template:"현재 위치를 설정하려면 위치 서비스를 켜 주세요"});o.then(function(o){o&&(cordova.plugins.settings.openSetting("location_source"),e.set_current_position())})},e.onClick=function(o,t,s){e.modal_obj=s,e.openAround_modal(),s.show=!s.show},e.set_current_position=function(){s.getCurrentPosition().then(function(o){var t={lat:o.coords.latitude,lng:o.coords.longitude,range:null,page_no:null,limit_row_num:null},s=[];h.nearCard(t).then(function(t){var n=h.getMapObject();e.map=n;for(var d in t){var n={};n.id=d,n.latitude=t[d].LAT,n.longitude=t[d].LNG,n.PHOTO_PATH=t[d].PHOTO_PATH,n.title=t[d].TITLE,n.content=t[d].CONTENT,s.push(n)}e.map.markers=s,e.gps_next_value?(e.map.center.latitude=o.coords.latitude,e.map.center.longitude=o.coords.longitude,e.map.zoom=17,e.map.control.refresh(),e.gps_next_value=!1):(_.show({template:"현재 위치를 가져오는 중입니다.",showDelay:0}),r(function(){e.map.center.latitude=o.coords.latitude,e.map.center.longitude=o.coords.longitude,e.map.zoom=17,e.map.control.refresh(),_.hide()},500),e.gps_next_value=!0)})})},e.openAround_modal=function(){_.show({template:"스토리를 가져오는 중입니다..",showDelay:0}),r(function(){_.hide(),d.fromTemplateUrl("state/shareplace/aroundmodal.html",{scope:e,animation:"slide-in-right"}).then(function(o){e.aroundmodal=o,e.aroundmodal.show()})},1e3)},e.close_aroundmodal=function(){e.aroundmodal.hide()},e.goto_shareplacesearchquery=function(){_.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),r(function(){_.hide(),c.go("tabs.shareplacesearchquery")},2e3)},e.upload_picture=function(){e.story_pictures=[],e.story_pictures_base64=[],e.check_pictureValue=!1;var o={maximumImagesCount:3,width:800,height:800,quality:80};i.getPictures(o).then(function(o){for(var t=0;t<o.length;t++)e.story_pictures.push(o[t]),convertImgToBase64URL(o[t],function(o){e.story_pictures_base64.push(o)}),e.check_pictureValue=!0,l.scrollBottom();e.$$phase||e.$apply()},function(e){throw alert(e),e})},e.setActive=function(o){e.active=o,"card"==o||"map"==o&&(e.map={center:{latitude:37.5568476,longitude:126.923791},zoom:17,control:{},markers:[],options:{mapTypeControl:!0}},h.setMapObject(e.map))},e.isActive=function(o){return o===e.active},e.check_placeValue=function(){return u.get_place_data().check_value},e.showRightMenu=function(){a.toggleRight()},e.finishShare=function(){var o=u.get_place_data();e.sendShareStory.photos=e.story_pictures_base64,e.sendShareStory.lat=o.selected_lat,e.sendShareStory.lng=o.selected_lng,e.sendShareStory.address=o.address,h.uploadStory(e.sendShareStory).then(function(e){_.show({template:'<i class="ion-checkmark-circled"></i> 스토리를 공유하였습니다.',noBackdrop:!0,duration:1e3}),r(function(){b()},1e3)})},e.goDestination=function(e,o){s.getCurrentPosition().then(function(t){console.log(t),console.log(e,o)})};var m=2;e.loadmoreStoryEvent=function(){var o={pagenum:m,title:e.story_card_obj.title};h.storyCard(o).then(function(o){console.log(o),e.storyCard.push(o),e.$broadcast("scroll.infiniteScrollComplete"),m++})}}]),angular.module("everbus.controllers").controller("shareplacesearchqueryCtrl",["$scope","LocationService","$state","placeinfoService",function(e,o,t,s){e.searchplace={},e.searchplace.suggestions=[],e.searchplace.query="",e.$watch("searchplace.query",function(s){s&&o.searchAddress(s).then(function(o){e.searchplace.error=null,e.searchplace.suggestions=o},function(o){e.searchplace.error="There was an error :( "+o}),e.choosePlace=function(e){o.getDetails(e.place_id).then(function(e){t.go("tabs.shareplacemarkonthemap",{placeobj:{location:e.geometry}})})}})}]),angular.module("everbus.controllers").controller("placesearchCtrl",["$scope","$state","$ionicLoading","$timeout","placesearchFactory","placelatlngFactory","placesearchinfoFactory","$ionicPopup","$localStorage",function(e,o,t,s,n,d,_,r,c){e.$storage=c,e.search_placepath=function(){if(void 0==d.get_start_latlng()||void 0==d.get_end_latlng()){r.alert({title:"알림",template:"출발지/도착지를 정확히 입력해 주세요"})}else{t.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'});var s;for(s=0;s<e.$storage.recently_search_List.length&&("place"!=e.$storage.recently_search_List[s].search_type||d.get_start_latlng().lat()!=e.$storage.recently_search_List[s].start_latlng.lat||d.get_start_latlng().lng()!=e.$storage.recently_search_List[s].start_latlng.lng||d.get_end_latlng().lat()!=e.$storage.recently_search_List[s].end_latlng.lat||d.get_end_latlng().lng()!=e.$storage.recently_search_List[s].end_latlng.lng);s++);if(s==e.$storage.recently_search_List.length){var n={};n.search_type="place",n.start_name=_.get_start_name(),n.end_name=_.get_end_name(),n.start_latlng=d.get_start_latlng(),n.end_latlng=d.get_end_latlng(),e.$storage.recently_search_List.push(n)}else{e.$storage.recently_search_List.splice(s,1);var n={};n.search_type="place",n.start_name=_.get_start_name(),n.end_name=_.get_end_name(),n.start_latlng=d.get_start_latlng(),n.end_latlng=d.get_end_latlng(),e.$storage.recently_search_List.push(n)}o.go("tabs.placesearchresult")}}}]),angular.module("everbus.controllers").controller("stationdetailCtrl",["$scope","$ionicHistory","$ionicFilterBar","$state","$ionicLoading","$timeout","busStopService","busRouteService",function(e,o,t,s,n,d,_,r){e.bus_stop={},e.showFilterBar=function(){t.show({items:e.bus_stop.stop_detail_info.ROUTELIST,update:function(o){console.log(o),e.bus_stop.stop_detail_info.ROUTELIST=o},filterProperties:"routenm"})},e.goback=function(){console.log("dd"),o.goBack()},e.$on("$ionicView.enter",function(){void 0===_.get_selected_stop_info()&&e.goback(),e.bus_stop=_.get_selected_stop_info(),
console.log(e.bus_stop),e.map={center:{latitude:e.bus_stop.stop_detail_info.LAT,longitude:e.bus_stop.stop_detail_info.LNG},zoom:17,options:{mapTypeControl:!1}},e.markers=[],e.markers.push({id:e.bus_stop.stop_detail_info.STOPID,arsid:e.bus_stop.stop_detail_info.ARSID,coords:{latitude:e.bus_stop.stop_detail_info.LAT,longitude:e.bus_stop.stop_detail_info.LNG},options:{draggable:!1,icon:"img/busStop_inMap.png"}});for(var o in e.bus_stop.arround_info){var t={id:e.bus_stop.arround_info[o].STOPID,arsid:e.bus_stop.arround_info[o].ARSID,areacd:e.bus_stop.arround_info[o].AREACD,coords:{latitude:e.bus_stop.arround_info[o].LAT,longitude:e.bus_stop.arround_info[o].LNG},options:{draggable:!1,icon:"img/non_busStop_inMap.png"},events:{}};e.markers.push(t)}e.map_check=!0}),e.$on("$ionicView.leave",function(){e.map_check=!1}),e.click_around_stop=function(o){console.log(o);var t={stopid:o.id,arsid:o.arsid,lat:o.coords.latitude,lng:o.coords.longitude};_.http_get_stop_detail(o.areacd,t).then(function(o){_.set_selected_stop_info(o),e.$broadcast("$ionicView.enter")})},e.refesh=function(){console.log(e.bus_stop.stop_detail_info),_.http_get_stop_detail(e.bus_stop.stop_detail_info.AREACD,e.bus_stop.stop_detail_info).then(function(o){console.log(o),_.set_selected_stop_info(o),e.bus_stop=_.get_selected_stop_info(),console.log(e.bus_stop),d(function(){n.hide()},500)},function(){d(function(){n.hide()},500),alert("network 불안정")}),n.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'})},e.click_bus=function(e,o){r.http_get_route_detail(e,o).then(function(e){r.set_selected_route(e),d(function(){s.go("tabs.routedetail"),n.hide()},500)}),n.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'})}}]),angular.module("everbus.controllers").controller("placesearchresultCtrl",["$scope","$state","$ionicLoading","placesearch_resultList","$timeout","placedetailFactory","remodelingPathlistService",function(e,o,t,s,n,d,_){var r=void 0;e.active="metro",e.$on("$ionicView.enter",function(){t.hide(),r=_.remodel_pathList(s),e.metro_pathList=r[0],e.bus_pathList=r[1],e.train_pathList=r[2],e.express_pathList=r[3]}),e.gotoplacedetail=function(e){console.log(e),t.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),n(function(){d.setPlace_obj(e),o.go("tabs.placedetail"),t.hide()},2e3)},e.setActive=function(o){e.active=o},e.isActive=function(o){return o===e.active}}]),angular.module("everbus.controllers").controller("tabsCtrl",["$scope","$state","$ionicHistory",function(e,o,t){e.clickRoute=function(){t.nextViewOptions({historyRoot:!0}),o.go("tabs.routesearch")},e.clickStop=function(){t.nextViewOptions({historyRoot:!0}),o.go("tabs.stationsearch")}}]),angular.module("everbus.controllers").controller("stationsearchCtrl",["$scope","$state","$ionicLoading","$timeout","busStopService","$localStorage",function(e,o,t,s,n,d){e.limit_cnt=10,e.$storage=d,e.gotostationdetail=function(d){n.http_get_stop_detail(d.areacd,d).then(function(_){n.set_selected_stop_info(_);var r;for(r=0;r<e.$storage.recently_search_List.length&&("station"!=e.$storage.recently_search_List[r].search_type||d.stopid!=e.$storage.recently_search_List[r].stopid);r++);r==e.$storage.recently_search_List.length?(d.search_type="station",e.$storage.recently_search_List.push(d)):(e.$storage.recently_search_List.splice(r,1),d.search_type="station",e.$storage.recently_search_List.push(d)),s(function(){o.go("tabs.stationdetail"),t.hide()},500)},function(){s(function(){t.hide()},500),alert("network 불안정")}),t.show({showBackdrop:!1,showDelay:0,template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'})};e.stop_search_key_up=function(o){void 0!==o&&o.length>=2&&n.http_get_stop_nm_list(o).then(function(o){e.stop_list=o,e.infinite_init()},function(){s(function(){t.hide()},500),alert("network 불안정")})},e.infinite_init=function(){e.limit_cnt=10,e.infinite_con=!0,e.$broadcast("scroll.infiniteScrollComplete")},e.limit_cnt=10,e.infinite_con=!1,e.loadMoreData=function(){e.limit_cnt<e.stop_list.length?(e.limit_cnt+=10,e.infinite_con=!0):e.infinite_con=!1,e.$broadcast("scroll.infiniteScrollComplete")}}]),angular.module("everbus.controllers").controller("shareplacemarkonthemapCtrl",["$scope","$cordovaGeolocation","$ionicPopup","$ionicLoading","$timeout","$ionicHistory","$stateParams","placeinfoService",function(e,o,t,s,n,d,_,r){e.map_check=!1;var c={};e.$on("$ionicView.enter",function(){c=_.placeobj,e.map={center:{latitude:c.location.location.lat(),longitude:c.location.location.lng()},zoom:17,options:{mapTypeControl:!1}},e.map_check=!0,console.log("초기 센터 값 : "),console.log(e.map.center)}),e.gps_next_value_inmodal=!1,e.chooseplace_byMap=function(){console.log("센터 값 : "),console.log(e.map.center);var o={};o.check_value=!0,o.location=new google.maps.LatLng(e.map.center.latitude,e.map.center.longitude);var t={lat:parseFloat(e.map.center.latitude),lng:parseFloat(e.map.center.longitude)},s=new google.maps.Geocoder;s.geocode({location:t},function(t,s){s===google.maps.GeocoderStatus.OK?t[1]?(o.address=t[1].formatted_address,o.selected_lat=e.map.center.latitude,o.selected_lng=e.map.center.longitude,r.set_place_data(o),d.goBack(-2)):window.alert("No results found"):window.alert("Geocoder failed due to: "+s)})},e.currentBtn_clicked=function(){var t={timeout:2e3,enableHighAccuracy:!0};o.getCurrentPosition(t).then(function(o){e.gps_next_value=!1,e.set_current_position()},function(o){e.showConfirm()})},e.showConfirm=function(){var o=t.confirm({title:"위치 정보 승인",template:"현재 위치를 설정하려면 위치 서비스를 켜 주세요"});o.then(function(o){o&&(cordova.plugins.settings.openSetting("location_source"),e.set_current_position())})},e.set_current_position=function(){o.getCurrentPosition().then(function(o){e.gps_next_value?(e.map.setCenter(new google.maps.LatLng(o.coords.latitude,o.coords.longitude)),e.map.setZoom(13),e.gps_next_value=!1):(s.show({template:"현재 위치를 가져오는 중입니다.",showDelay:0}),n(function(){e.map.setCenter(new google.maps.LatLng(o.coords.latitude,o.coords.longitude)),e.map.setZoom(17),s.hide()},500),e.gps_next_value=!0)})}}]),angular.module("everbus.controllers").controller("sidemenusCtrl",["$scope","$http","$state","$stateParams","selectedAreaService","getappinfoService",function(e,o,t,s,n,d){e.config_title=s.config_title,e.active=s.active,e.items=[{title:"[공지] 3월 1일 업데이트",text:"현재 나와있는 모든 버스 어플리케이션은 실시간 정보를 얻어오기 위해서 서버와 통신을 하게 됩니다.\n\n출퇴근 시간에 서버와 다수의 통신으로 인해서 정보를 가져오는데 어려움이 있습니다.\n\n특히, 경기도 서버가 트래픽이 많아지면 불안정한 모습을 많이 보여줍니다.\n\n이로 인해 안정화 작업을 계속해서 진행하고 있으며v2.0.4 (2014.03.11)에서 최대한 안정화를 시켰습니다.\n\n최신 버전으로 업데이트를 하시면 더욱 편리하게 실시간 정보를 이용할 수 있습니다.\n\n좋은 하루되세요~! 부릉~!!!!"},{title:"9월 10일 업데이트",text:"\n** 서버 설정 변경\n\n ** 어플리케이션 성능 개선\n\n"},{title:"9월 1일 업데이트",text:"\n** 지도에서 구글 로고, 이용약관 터치시 뒤로가기 버튼 무반응 에러 수정(구글 지도, 시스템 브라우저로 변경)\n\n"},{title:"8월 24일 업데이트",text:"\n** 앱 비정상 적으로 종료되던 에러 수정\n\n** 앱종료시 더이상 알림창이 뜨지 않으며 '뒤로가기' 버튼을 통해 앱 종료\n\n** 화순, 대구 노선구분을 위한 상세정보 표시 (정류소 검색 후 정류소 상세 페이지에 표시 됨)\n\n"},{title:"8월 18일 업데이트",text:"\n** 길찾기의 북마크 기능 추가(원하는 경로를 검색 한 후 상단 오른쪽 별표 터치!)\n\n** 노선 상세 페이지에서 기점 첫차/막차, 종점 첫차/막차 에러 수정\n\n** 지역선택 UI 수정\n\n"},{title:"7월 29일 업데이트",text:"\n** 도움말 기능 추가 (화면 오른쪽 상단 설정아이콘 -> 도움말)\n\n** 진동기능 on/off (화면 오른쪽 상단 설정아이콘 -> 설정)\n\n** 최근검색 삭제되지 않던 에러 수정\n\n** 길찾기 검색 후 도착지 클릭시 지도에 위치 표시\n\n"}],e.toggleItem=function(o){e.isItemShown(o)?e.shownItem=null:e.shownItem=o},e.isItemShown=function(o){return e.shownItem===o},e.all_division=[],n.check_selected_area_list()?e.all_division=n.get_selected_area_list():n.init_selected_area_list().then(function(o){e.all_division=n.get_selected_area_list()}),e.click_item=function(){n.set_selected_area_list(e.all_division),n.set_areacd_arr()}}]);